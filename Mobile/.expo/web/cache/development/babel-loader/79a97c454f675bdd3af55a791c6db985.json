{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport { Text, Box, ScrollView, HStack, View, Input, Pressable } from \"native-base\";\nimport HomeProducts from \"../Components/HomeProducts\";\nimport Colors from \"../color\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { Ionicons, EvilIcons } from \"@expo/vector-icons\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar categories = [{\n  label: \"Xe cộ\",\n  image: require(\"../../assets/xeco.png\")\n}, {\n  label: \"Giải trí, thể thao\",\n  image: require(\"../../assets/giaitri.png\")\n}, {\n  label: \"Đồ gia dụng, nội thất, cây cảnh\",\n  image: require(\"../../assets/noithat.jpg\")\n}, {\n  label: \"Thời trang\",\n  image: require(\"../../assets/thoitrang.jpg\")\n}, {\n  label: \"Tủ lạnh, máy lạnh\",\n  image: require(\"../../assets/tulanh.jpg\")\n}, {\n  label: \"Đồ điện tử\",\n  image: require(\"../../assets/dodientu.jpg\")\n}];\nvar Url = \"http://192.168.1.3:5000\";\nfunction SearchScreen(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    pro = _useState2[0],\n    setPro = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    search = _useState4[0],\n    setSearch = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var wait = function wait(timeout) {\n    return new Promise(function (resolve) {\n      return setTimeout(resolve, timeout);\n    });\n  };\n  var fetchProducts = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var _yield$axios$get = yield axios.get(Url + \"/api/product/show/accept\"),\n          data = _yield$axios$get.data;\n        if (search.trim() != \"\") {\n          setPro(data.filter(function (data) {\n            return data.title.toString().toLowerCase().includes(search.toString().toLowerCase());\n          }));\n        } else {\n          setPro(data);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    return function fetchProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    fetchProducts();\n    setTimeout(function () {\n      setLoading(false);\n    }, 2000);\n  }, []);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    refreshing = _React$useState2[0],\n    setRefreshing = _React$useState2[1];\n  var onRefresh = React.useCallback(function () {\n    setRefreshing(true);\n    setLoading(true);\n    fetchProducts();\n    wait(1000).then(function () {\n      setRefreshing(false);\n      setLoading(false);\n    });\n  }, []);\n  return _jsxs(Box, {\n    bg: Colors.gray,\n    flex: 1,\n    children: [_jsxs(HStack, {\n      space: 3,\n      w: \"full\",\n      px: 4,\n      bg: \"#FFA500\",\n      py: 3,\n      alignItems: \"center\",\n      safeAreaTop: true,\n      children: [_jsx(Pressable, {\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: _jsx(Ionicons, {\n          name: \"arrow-back\",\n          size: 24,\n          color: \"white\"\n        })\n      }), _jsxs(View, {\n        flex: 1,\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        bg: Colors.white,\n        rounded: 5,\n        children: [_jsx(EvilIcons, {\n          name: \"search\",\n          size: 24,\n          color: \"#8B8B7A\",\n          style: {\n            marginLeft: 5\n          }\n        }), _jsx(Input, {\n          placeholder: \"T\\xECm ki\\u1EBFm \",\n          w: \"85%\",\n          size: 10,\n          pl: 2,\n          bg: Colors.white,\n          flex: 1,\n          type: \"search\",\n          h: 9,\n          borderWidth: 0,\n          _focus: {\n            bg: Colors.white\n          },\n          onChangeText: function onChangeText(e) {\n            e = e.replace(/  +/g, \" \");\n            setSearch(e.replace(/^[ \\t]+|[ \\t]+$/gm, \"\"));\n          },\n          onEndEditing: function onEndEditing() {\n            fetchProducts();\n          },\n          variant: \"filled\"\n        })]\n      })]\n    }), loading ? _jsx(View, {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    }) : _jsxs(ScrollView, {\n      showsVerticalScrollIndicator: false,\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh\n      }),\n      children: [_jsx(View, {\n        bg: Colors.white,\n        children: _jsxs(Pressable, {\n          mt: 1,\n          borderWidth: 1,\n          p: 3,\n          rounded: 5,\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          borderColor: \"gray.400\",\n          onPress: function onPress() {\n            navigation.goBack();\n          },\n          children: [_jsx(Text, {\n            children: \"Danh m\\u1EE5c\"\n          }), _jsx(Ionicons, {\n            name: \"chevron-forward\",\n            size: 20,\n            color: Colors.deepestGray,\n            style: {\n              alignSelf: \"center\"\n            }\n          })]\n        })\n      }), pro.length > 0 ? _jsx(Box, {\n        bg: Colors.white,\n        mt: 2,\n        pb: 5,\n        children: _jsx(HomeProducts, {\n          products: pro\n        })\n      }) : _jsx(View, {\n        children: _jsx(Text, {\n          children: \"Ko c\\xF3\"\n        })\n      })]\n    })]\n  });\n}\nexport default SearchScreen;","map":{"version":3,"names":["React","useEffect","useState","Text","Box","ScrollView","HStack","View","Input","Pressable","HomeProducts","Colors","Ionicons","EvilIcons","axios","categories","label","image","require","Url","SearchScreen","navigation","route","pro","setPro","search","setSearch","loading","setLoading","wait","timeout","Promise","resolve","setTimeout","fetchProducts","get","data","trim","filter","title","toString","toLowerCase","includes","error","console","log","refreshing","setRefreshing","onRefresh","useCallback","then","gray","goBack","white","marginLeft","bg","e","replace","deepestGray","alignSelf","length"],"sources":["F:/DoAn/DACN1/ShopApp/src/Screens/SearchScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Text,\r\n  Box,\r\n  ScrollView,\r\n  HStack,\r\n  View,\r\n  Input,\r\n  Pressable,\r\n} from \"native-base\";\r\nimport HomeProducts from \"../Components/HomeProducts\";\r\nimport Colors from \"../color\";\r\nimport { ActivityIndicator, RefreshControl } from \"react-native\";\r\nimport { Ionicons, EvilIcons } from \"@expo/vector-icons\";\r\nimport axios from \"axios\";\r\n\r\nconst categories = [\r\n  {\r\n    label: \"Xe cộ\",\r\n    image: require(\"../../assets/xeco.png\"),\r\n  },\r\n  {\r\n    label: \"Giải trí, thể thao\",\r\n    image: require(\"../../assets/giaitri.png\"),\r\n  },\r\n  {\r\n    label: \"Đồ gia dụng, nội thất, cây cảnh\",\r\n    image: require(\"../../assets/noithat.jpg\"),\r\n  },\r\n  {\r\n    label: \"Thời trang\",\r\n    image: require(\"../../assets/thoitrang.jpg\"),\r\n  },\r\n  {\r\n    label: \"Tủ lạnh, máy lạnh\",\r\n    image: require(\"../../assets/tulanh.jpg\"),\r\n  },\r\n  {\r\n    label: \"Đồ điện tử\",\r\n    image: require(\"../../assets/dodientu.jpg\"),\r\n  },\r\n];\r\nconst Url = `http://192.168.1.3:5000`;\r\n\r\nfunction SearchScreen({ navigation, route }) {\r\n  const [pro, setPro] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const wait = (timeout) => {\r\n    return new Promise((resolve) => setTimeout(resolve, timeout));\r\n  };\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const { data } = await axios.get(`${Url}/api/product/show/accept`);\r\n      if (search.trim() != \"\") {\r\n        setPro(\r\n          data.filter((data) =>\r\n            data.title\r\n              .toString()\r\n              .toLowerCase()\r\n              .includes(search.toString().toLowerCase())\r\n          )\r\n        );\r\n      } else {\r\n        setPro(data);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 2000);\r\n  }, []);\r\n\r\n  const [refreshing, setRefreshing] = React.useState(false);\r\n  const onRefresh = React.useCallback(() => {\r\n    setRefreshing(true);\r\n    setLoading(true);\r\n    fetchProducts();\r\n    wait(1000).then(() => {\r\n      setRefreshing(false);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n  return (\r\n    <Box bg={Colors.gray} flex={1}>\r\n      <HStack\r\n        space={3}\r\n        w=\"full\"\r\n        px={4}\r\n        bg=\"#FFA500\"\r\n        py={3}\r\n        alignItems=\"center\"\r\n        safeAreaTop\r\n      >\r\n        <Pressable onPress={() => navigation.goBack()}>\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"white\" />\r\n        </Pressable>\r\n        <View\r\n          flex={1}\r\n          flexDirection=\"row\"\r\n          alignItems=\"center\"\r\n          bg={Colors.white}\r\n          rounded={5}\r\n        >\r\n          <EvilIcons\r\n            name=\"search\"\r\n            size={24}\r\n            color=\"#8B8B7A\"\r\n            style={{ marginLeft: 5 }}\r\n          />\r\n          <Input\r\n            placeholder=\"Tìm kiếm \"\r\n            w=\"85%\"\r\n            size={10}\r\n            pl={2}\r\n            bg={Colors.white}\r\n            flex={1}\r\n            type=\"search\"\r\n            h={9}\r\n            borderWidth={0}\r\n            _focus={{ bg: Colors.white }}\r\n            onChangeText={(e) => {\r\n              e = e.replace(/  +/g, \" \");\r\n              setSearch(e.replace(/^[ \\t]+|[ \\t]+$/gm, \"\"));\r\n            }}\r\n            onEndEditing={() => {\r\n              fetchProducts();\r\n            }}\r\n            variant=\"filled\"\r\n          />\r\n        </View>\r\n      </HStack>\r\n      {loading ? (\r\n        <View flex={1} justifyContent=\"center\" alignItems=\"center\">\r\n          <ActivityIndicator size=\"large\" />\r\n        </View>\r\n      ) : (\r\n        <ScrollView\r\n          showsVerticalScrollIndicator={false}\r\n          refreshControl={\r\n            <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\r\n          }\r\n        >\r\n          <View bg={Colors.white}>\r\n            <Pressable\r\n              mt={1}\r\n              borderWidth={1}\r\n              p={3}\r\n              rounded={5}\r\n              flexDirection=\"row\"\r\n              justifyContent=\"space-between\"\r\n              borderColor=\"gray.400\"\r\n              onPress={() => {\r\n                navigation.goBack();\r\n              }}\r\n            >\r\n              <Text>Danh mục</Text>\r\n              <Ionicons\r\n                name=\"chevron-forward\"\r\n                size={20}\r\n                color={Colors.deepestGray}\r\n                style={{ alignSelf: \"center\" }}\r\n              />\r\n            </Pressable>\r\n          </View>\r\n          {pro.length > 0 ? (\r\n            <Box bg={Colors.white} mt={2} pb={5}>\r\n              <HomeProducts products={pro} />\r\n            </Box>\r\n          ) : (\r\n            <View>\r\n              <Text>Ko có</Text>\r\n            </View>\r\n          )}\r\n        </ScrollView>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default SearchScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}